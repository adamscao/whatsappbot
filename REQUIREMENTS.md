完整需求Prompt（精确版）  
你需要使用 whatsapp-web.js 框架，构建一个 WhatsApp 聊天机器人，功能需求和流程包括：
1. 命令与功能  
   - `$help`: 显示帮助信息  
   - `$list`: 显示支持的 AI 引擎列表  
   - `$use [AI Engine]`: 切换当前用户正在使用的 AI 引擎  
   - `$model [AI Model]`: 切换当前用户所用的模型  
   - `$clear`: 清除与 AI 的历史对话记录  
   - `$price`: 显示加密货币价格  
   - `$reminder [自然语言]`: 设置提醒（文本中包含时间、日期或条件等信息，后端需要用 AI 预处理或解析）  
   - `$listrem`: 显示当前用户的提醒列表  
   - `$rmrem [reminder ID]`: 删除当前用户的某个提醒  
2. AI 引擎及模型  
   - 支持的 AI 引擎包括：`openai`, `anthropic`, `gemini`, `deepseek`，可扩展更多。  
   - 通过检查环境变量判断某个引擎是否可用（如果设置了对应 API Key），在 `$list` 命令中只展示可用的引擎。  
   - 默认引擎：`openai`；默认模型：`gpt-4o`。  
   - 为每个用户记录其当前引擎和模型，供后续会话及回答使用。  
3. 会话与消息处理  
   - 机器人只在群消息中被 @ 时才回应；在处理用户消息时，需要去除文本中 `@[bot名字]` 的部分，再将剩余内容交给 AI。  
   - 保存用户与机器人的历史对话，以实现上下文连续对话；不同群或私聊中，用户都有各自独立的历史记录。  
   - 在需要翻译或预处理时，使用 `openai` 的 `gpt-4o` 模型；  
   - 当用户以中文提问并需要外部搜索时，将问题翻译成英文后再搜索，并根据搜索结果回答；最后将结果翻译回中文；  
     - 如用户明确指定“用中文搜索”，则不做翻译，直接使用中文搜索；  
   - 必要时通过调用 Google 搜索 API（或第三方搜索接口）获取信息，以提高答案准确度。  
4. 加密货币价格功能  
   - `$price` 命令返回加密货币的中美价格对比列表，并显示 24 小时涨跌幅，示例格式：  
```     
     ====================
     货币   USD     CNY     涨跌幅   
     ====================
     BTC : $  90567 ¥  657836    +8.34%
     ETH : $   2226 ¥   16169    +6.32%
     LTC : $    104 ¥     758    +2.16%
     BCH : $    385 ¥    2796    +27.19%
```       
   - 默认每 4 小时，在指定的群中自动发布一次加密货币价格信息（可配置一个或者多个群）。  
5. 提醒功能  
   - 用户通过 `$reminder` 命令，以自然语言描述提醒事件和时间（例如：“明天下午三点提醒我开会”）。  
   - 后端使用预处理模型（OpenAI `gpt-4o`）将自然语言解析出时间点或特征，并存储到数据库；  
   - 到达提醒时，如果在群聊中设置的提醒，机器人需要在群里 @ 该用户并显示提醒内容；如果是私聊，则私聊提醒。  
   - `$listrem` 命令查看当前用户的所有提醒；`$rmrem [ID]` 命令删除指定提醒；  
6. 数据持久化  
   - 使用 `sqlite3` 数据库：  
     - 存储所有收到的文字消息（包括私聊与群聊），以备后期审查或统计；  
     - 存储用户当前所选的引擎、模型；  
     - 存储用户的提醒列表；  
